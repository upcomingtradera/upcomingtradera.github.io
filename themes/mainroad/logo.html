{{- $logoTitle := .Site.Params.logo.title | default .Site.Title -}}
{{- $logoSubtitle := .Site.Params.logo.subtitle | default .Site.Params.subtitle -}}
{{- $logoImage := .Site.Params.logo.image -}}
{{- $logoMix := and $logoImage $logoTitle -}}

{{ $logoFilename := .Site.Params.logo.image }} <!-- Get the logo filename from the site parameters -->
{{ $originalLogo := resources.Get $logoFilename }} <!-- Fetch the logo from the assets directory using the filename -->


{{ if $originalLogo }}
    {{ $urlizedTitle := $logoTitle | urlize }}

    {{ $largeLogo := $originalLogo.Resize "512x512" }}
    {{ with $largeLogo | resources.Copy (print "assets/logo/" $urlizedTitle "-LPNG.png") }}
        {{ $largeLogo = . }}
    {{ end }}

    {{ $mediumLogo := $originalLogo.Resize "256x256" }}
    {{ with $mediumLogo | resources.Copy (print "assets/logo/" $urlizedTitle "-MPNG.png") }}
        {{ $mediumLogo = . }}
    {{ end }}

    {{ $smallLogo := $originalLogo.Resize "128x128" }}
    {{ with $smallLogo | resources.Copy (print "assets/logo/" $urlizedTitle "-SPNG.png") }}
        {{ $smallLogo = . }}
    {{ end }}

    {{ $extraSmallLogo := $originalLogo.Resize "64x64" }}
    {{ with $extraSmallLogo | resources.Copy (print "assets/logo/" $urlizedTitle "-ESPNG.png") }}
        {{ $extraSmallLogo = . }}
    {{ end }}

    {{ $largeWEBP := $originalLogo.Resize "512x512 webp" }}
    {{ with $largeWEBP | resources.Copy (print "assets/logo/" $urlizedTitle "-LWEBP.webp") }}
        {{ $largeWEBP = . }}
    {{ end }}

    {{ $mediumWEBP := $originalLogo.Resize "256x256 webp" }}
    {{ with $mediumWEBP | resources.Copy (print "assets/logo/" $urlizedTitle "-MWEBP.webp") }}
        {{ $mediumWEBP = . }}
    {{ end }}

    {{ $smallWEBP := $originalLogo.Resize "128x128 webp" }}
    {{ with $smallWEBP | resources.Copy (print "assets/logo/" $urlizedTitle "-SWEBP.webp") }}
        {{ $smallWEBP = . }}
    {{ end }}

    {{ $extraSmallWEBP := $originalLogo.Resize "64x64 webp" }}
    {{ with $extraSmallWEBP | resources.Copy (print "assets/logo/" $urlizedTitle "-ESWEBP.webp") }}
        {{ $extraSmallWEBP = . }}
    {{ end }}

    {{ $largeJPG := $originalLogo.Resize "512x512 jpg" }}
    {{ with $largeJPG | resources.Copy (print "assets/logo/" $urlizedTitle "-LJPG.jpg") }}
        {{ $largeJPG = . }}
    {{ end }}

    {{ $mediumJPG := $originalLogo.Resize "256x256 jpg" }}
    {{ with $mediumJPG | resources.Copy (print "assets/logo/" $urlizedTitle "-MJPG.jpg") }}
        {{ $mediumJPG = . }}
    {{ end }}

    {{ $smallJPG := $originalLogo.Resize "128x128 jpg" }}
    {{ with $smallJPG | resources.Copy (print "assets/logo/" $urlizedTitle "-SJPG.jpg") }}
        {{ $smallJPG = . }}
    {{ end }}

    {{ $extraSmallJPG := $originalLogo.Resize "64x64 jpg" }}
    {{ with $extraSmallJPG | resources.Copy (print "assets/logo/" $urlizedTitle "-ESJPG.jpg") }}
        {{ $extraSmallJPG = . }}
    {{ end }}

	<div class="logo{{ with $logoMix }} logo--mixed{{ end }}">
		<a class="logo__link" href="{{ "" | relLangURL }}" title="{{ $logoTitle }}" rel="home">
			<div class="logo__item logo__imagebox">
				<picture>
					<!-- WebP format -->
					<source media="(min-width: 1024px)" srcset="{{ $largeWEBP.RelPermalink }}" type="image/webp">
					<source media="(min-width: 512px)" srcset="{{ $mediumWEBP.RelPermalink }}" type="image/webp">
					<source media="(min-width: 256px)" srcset="{{ $smallWEBP.RelPermalink }}" type="image/webp">
					<source srcset="{{ $extraSmallWEBP.RelPermalink }}" type="image/webp">

					<!-- JPG format -->
					<source media="(min-width: 1024px)" srcset="{{ $largeJPG.RelPermalink }}" type="image/jpeg">
					<source media="(min-width: 512px)" srcset="{{ $mediumJPG.RelPermalink }}" type="image/jpeg">
					<source media="(min-width: 256px)" srcset="{{ $smallJPG.RelPermalink }}" type="image/jpeg">
					<source srcset="{{ $extraSmallJPG.RelPermalink }}" type="image/jpeg">

					<!-- PNG format -->
					<source media="(min-width: 1024px)" srcset="{{ $largeLogo.RelPermalink }}" type="image/png">
					<source media="(min-width: 512px)" srcset="{{ $mediumLogo.RelPermalink }}" type="image/png">
					<source media="(min-width: 256px)" srcset="{{ $smallLogo.RelPermalink }}" type="image/png">
					<source srcset="{{ $extraSmallLogo.RelPermalink }}" type="image/png">

					<!-- Fallback image -->
					<img class="logo__img" src="{{ $largeJPG.RelPermalink }}" alt="{{ $logoTitle }}" width="256" height="256">
				</picture>
			</div>
			{{ with $logoTitle }}
				<div class="logo__item logo__text">
					<div class="logo__title">{{ . }}</div>
					{{ with $logoSubtitle }}<div class="logo__tagline">{{ . }}</div>{{ end }}
				</div>
			{{ end }}
		</a>
	</div>
{{ end }}
