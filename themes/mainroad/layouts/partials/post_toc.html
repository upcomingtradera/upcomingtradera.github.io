{{- if .Param "toc" }}
{{ $toc := .TableOfContents }}
{{ $toc := replaceRE "<ul>" "<ul class=\"toc__list\">" $toc }}
{{ $toc := replaceRE "<li>" "<li class=\"toc__item\">" $toc }}
{{ $toc := replaceRE "<a " "<a class=\"toc__link\" " $toc }}

{{- if gt (len .TableOfContents) 32 }}<!-- Issue #247 -->
<div class="post__toc toc">
	<div class="toc__title">{{ T "toc_title" }}</div>

        <button class="toc__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
            <span class="toc__btn-title" tabindex="-1">TOGGLE TABLE OF CONTENTS</span>
        </button>

	<div class="toc__menu">
	    {{ $toc | safeHTML }}
	</div>

	{{/*
	<div class="toc__menu">
		{{ .TableOfContents }}
	</div>
	*/}}
</div>
{{- end }}
{{- end }}
